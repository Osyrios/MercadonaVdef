{# Héritage de base.htmlt #}
{% extends "base.html" %}


{# modification de la balise Title #}
{% block title %}Catalogue{% endblock title %}


{# Ajout du CSS personnalisé pour cette page dans le head de base.html #}
{% block head %}
{{ super() }}
{% endblock head %}


{# Ajout des liens de navigation propre a la page #}
{% block liens %}
{% endblock liens %}


{# Ajout du content propre à la page #}
{% block content %}

    <div class="flex flex-col" >



    {# FILTER ZONE #}
      <div class="flex flex-col items-center">
          <div class="flex flex-row justify-end my-3 me-2">
              <button type="button" class="filterButton inline-flex self-end justify-center gap-x-1.5 rounded-md bg-green-600 px-3 py-2 text-sm font-RobotoBold text-gray-300 shadow-sm" id="menu-button" aria-expanded="true" aria-haspopup="false">
                  Filtres
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 256 256" xml:space="preserve">
                <defs>
                </defs>
                <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)" >
                    <path d="M 85.813 59.576 H 55.575 c -1.657 0 -3 -1.343 -3 -3 s 1.343 -3 3 -3 h 30.237 c 1.657 0 3 1.343 3 3 S 87.47 59.576 85.813 59.576 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"></path>
                    <path d="M 48.302 66.849 c -5.664 0 -10.272 -4.608 -10.272 -10.272 c 0 -5.665 4.608 -10.273 10.272 -10.273 c 5.665 0 10.273 4.608 10.273 10.273 C 58.575 62.24 53.967 66.849 48.302 66.849 z M 48.302 52.303 c -2.356 0 -4.272 1.917 -4.272 4.273 c 0 2.355 1.917 4.272 4.272 4.272 c 2.356 0 4.273 -1.917 4.273 -4.272 C 52.575 54.22 50.658 52.303 48.302 52.303 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"></path>
                    <path d="M 41.029 59.576 H 4.188 c -1.657 0 -3 -1.343 -3 -3 s 1.343 -3 3 -3 h 36.842 c 1.657 0 3 1.343 3 3 S 42.686 59.576 41.029 59.576 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"></path>
                    <path d="M 85.813 36.424 h -57.79 c -1.657 0 -3 -1.343 -3 -3 s 1.343 -3 3 -3 h 57.79 c 1.657 0 3 1.343 3 3 S 87.47 36.424 85.813 36.424 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"></path>
                    <path d="M 20.75 43.697 c -5.665 0 -10.273 -4.608 -10.273 -10.273 s 4.608 -10.273 10.273 -10.273 s 10.273 4.608 10.273 10.273 S 26.414 43.697 20.75 43.697 z M 20.75 29.151 c -2.356 0 -4.273 1.917 -4.273 4.273 s 1.917 4.273 4.273 4.273 s 4.273 -1.917 4.273 -4.273 S 23.105 29.151 20.75 29.151 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"></path>
                    <path d="M 13.477 36.424 H 4.188 c -1.657 0 -3 -1.343 -3 -3 s 1.343 -3 3 -3 h 9.289 c 1.657 0 3 1.343 3 3 S 15.133 36.424 13.477 36.424 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"></path>
                    <path d="M 57.637 13.273 H 4.188 c -1.657 0 -3 -1.343 -3 -3 s 1.343 -3 3 -3 h 53.449 c 1.657 0 3 1.343 3 3 S 59.294 13.273 57.637 13.273 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"></path>
                    <path d="M 64.909 20.546 c -5.664 0 -10.272 -4.608 -10.272 -10.273 S 59.245 0 64.909 0 c 5.665 0 10.273 4.608 10.273 10.273 S 70.574 20.546 64.909 20.546 z M 64.909 6 c -2.355 0 -4.272 1.917 -4.272 4.273 s 1.917 4.273 4.272 4.273 c 2.356 0 4.273 -1.917 4.273 -4.273 S 67.266 6 64.909 6 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"></path>
                    <path d="M 85.813 13.273 h -13.63 c -1.657 0 -3 -1.343 -3 -3 s 1.343 -3 3 -3 h 13.63 c 1.657 0 3 1.343 3 3 S 87.47 13.273 85.813 13.273 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"></path>
                    <path d="M 85.813 82.728 h -57.79 c -1.657 0 -3 -1.343 -3 -3 s 1.343 -3 3 -3 h 57.79 c 1.657 0 3 1.343 3 3 S 87.47 82.728 85.813 82.728 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"></path>
                    <path d="M 20.75 90 c -5.665 0 -10.273 -4.608 -10.273 -10.272 c 0 -5.665 4.608 -10.273 10.273 -10.273 s 10.273 4.608 10.273 10.273 C 31.022 85.392 26.414 90 20.75 90 z M 20.75 75.454 c -2.356 0 -4.273 1.917 -4.273 4.273 c 0 2.355 1.917 4.272 4.273 4.272 s 4.273 -1.917 4.273 -4.272 C 25.022 77.371 23.105 75.454 20.75 75.454 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"></path>
                    <path d="M 13.477 82.728 H 4.188 c -1.657 0 -3 -1.343 -3 -3 s 1.343 -3 3 -3 h 9.289 c 1.657 0 3 1.343 3 3 S 15.133 82.728 13.477 82.728 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"></path>
                </g>
                </svg>
            </button>
          </div>

        <div class="filterMenu hidden text-sm border border-green-600 rounded-2xl shadow w-2/3 p-3 lg:w-1/3 ">
            <form action="" method="" id="filter"
                  class="flex flex-col items-center">
                <div class="my-2">
                    {# Zone de filtrage des produits souhaités par catégorie #}
                    <select class="form-select rounded-2xl p-2 text-white bg-green-600 font-RobotoRegular" aria-label="Selection de la categorie">
                      <option selected>Choisir une catégorie</option>
                        {% for categorie in categories %}
                            <option value="{{ categorie }}"> {{ categorie|capitalize }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="font-RobotoBold pt-2">
                  <p class="">Ordre d'affichage</p>
                </div>

                <div>
                   {# Zone de filtrage des produits souhaités par prix #}
                    <div class="">
                      <input class="" type="radio" name="tri-choix" id="croissant" value="croissant" checked>
                      <label class="" for="croissant">
                        Ordre croissant (du - cher au + cher)
                      </label>
                    </div>
                    <div class="">
                      <input class="" type="radio" name="tri-choix" id="decroissant" value="decroissant">
                      <label class="" for="decroissant">
                        Ordre décroissant (du + cher au - cher)
                      </label>
                    </div>
                </div>

                  <div class="my-3 rounded p-2 bg-green-600 font-RobotoBold">
                      <button type="submit" class="" id="filter">Appliquer</button>
                  </div>
            </form>
        </div>
      </div>

      {# endroit ou les Articles apparaissent #}
    <div class="flex flex-col items-center text-sm md:flex-row md:flex-wrap md:gap-x-16 md:justify-center"
         id="product-display">
                {% for product in products %}
                        <div class="flex flex-col items-center shadow-md hover:shadow-lg shadow-green-600 hover:scale-110 hover:shadow-blue-700 transition rounded-2xl my-8 w-1/2 md:w-1/4 xl:w-1/5">
                            <div class="text-center p-2 my-2 text-base">
                                <h5 class="font-Saiba">{{ product.name }}</h5>
                            </div>

                            <div class="overflow-hidden w-44 h-44 md:w-auto">
                                <img src="data:image;base64,{{ product.image_data }}" class="object-contain w-full h-full" alt="Image 1">
                            </div>

                            <div class="m-5">
                                    <p class="text-center font-RobotoItalic">{{ product.category_name }}</p>
                                    <p class="py-3">{{ product.description }}</p>
                                {% if product.promo_start != product.promo_end %}
                                    {% if product.promo_end > today %}
                                        <p class="text-red-600">PROMO</p>
                                        <p>{{ product.promo_amount }}% jusqu'au: {{ product.promo_end }}</p>
                                        <p class="text-red-600 text-base"><span class="old-price text-black">{{ product.price }}</span>
                                            Nouveau prix: <span class="font-RobotoBold text-red-600">{{ product.new_price| round(2) | float }}€</span></p>
                                    {% else %}
                                        <p class="font-RobotoBold text-base">Prix: {{ product.price }}€</p>
                                    {% endif %}
                                {% else %}
                                        <p class="font-RobotoBold text-base">Prix: {{ product.price }}€</p>
                                {% endif %}
                            </div>
                        </div>
                {% endfor %}
        </div>

    </div>
    
<script src="{{url_for('static', filename='scripts/catalogue.js')}}"></script>
{% endblock content %}
